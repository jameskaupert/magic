---
- name: Install container packages from Pacman
  become: true
  become_user: root
  ansible.builtin.package:
    name: "{{ containers.packages }}"
    state: present

- name: Rancher Desktop
  block:
    - name: Download AppImage
      ansible.builtin.get_url:
        url: "{{ containers.appimages.rancher_desktop.url }}"
        dest: "{{ containers.appimages.rancher_desktop.appimage_path }}"
        mode: '0755'

    - name: Create desktop entry
      ansible.builtin.command:
        cmd: "{{ package_management.appimage_path }}/appimage-desktop-entry {{ containers.appimages.rancher_desktop.appimage_path }}"
        creates: "{{ containers.appimages.rancher_desktop.desktop_entry_path }}"
